<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Selector de Serie y Capítulo</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  .container {
    max-width: 600px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  select {
    width: 100%;
    margin-bottom: 10px;
  }
  audio {
    width: 100%;
    margin-top: 10px;
  }
  .serie-info-item {
    margin-bottom: 5px;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Selector de Serie y Capítulo</h2>
  <label for="serie">Seleccione una serie:</label>
  <select id="serie" onchange="loadChapters(); updateSerieInfo();">
    <option value="">Seleccione una serie</option>
  </select>
  
  <h3>Ficha de la Serie</h3>
  <div id="serie-info"></div>
  
  <h3>Seleccionar Capítulo</h3>
  <label for="capitulo">Seleccione un capítulo:</label>
  <select id="capitulo" onchange="playChapter()">
    <option value="">Seleccione un capítulo</option>
  </select>
  
  <audio id="audio-player" controls>
    Tu navegador no soporta la reproducción de audio.
  </audio>
</div>

<script>
  function loadSeries() {
    fetch('https://raw.githubusercontent.com/ceosca/l/main/series.json')
      .then(response => response.json())
      .then(data => {
        const seriesSelect = document.getElementById('serie');
        const serieInfo = document.getElementById('serie-info');
        data.series.forEach(serie => {
          const option = document.createElement('option');
          option.value = JSON.stringify(serie);
          option.textContent = serie.nombre;
          seriesSelect.appendChild(option);
        });

        updateSerieInfo();
      });
  }
  
  function loadChapters() {
    const serieSelect = document.getElementById('serie');
    const selectedSerie = JSON.parse(serieSelect.value);
    const chaptersSelect = document.getElementById('capitulo');
    chaptersSelect.innerHTML = '<option value="">Seleccione un capítulo</option>';
    selectedSerie.capitulos.forEach(capitulo => {
      const option = document.createElement('option');
      option.value = JSON.stringify(capitulo);
      option.textContent = capitulo.titulo;
      chaptersSelect.appendChild(option);
    });
    
    const audioPlayer = document.getElementById('audio-player');
    audioPlayer.src = selectedSerie.enlace;
  }

  function updateSerieInfo() {
    const serieSelect = document.getElementById('serie');
    const selectedSerie = JSON.parse(serieSelect.value);
    const serieInfo = document.getElementById('serie-info');
    serieInfo.innerHTML = `
      <div class="serie-info-item"><strong>Nombre:</strong> ${selectedSerie.nombre}</div>
      <div class="serie-info-item"><strong>Género:</strong> ${selectedSerie.genero}</div>
      <div class="serie-info-item"><strong>Año:</strong> ${selectedSerie.anio}</div>
      <div class="serie-info-item"><strong>Reparto:</strong> ${selectedSerie.reparto.join(", ")}</div>
      <div class="serie-info-item"><strong>País de Origen:</strong> ${selectedSerie.pais_origen}</div>
      <div class="serie-info-item"><strong>Temporadas:</strong> ${selectedSerie.cantidad_temporadas}</div>
      <div class="serie-info-item"><strong>Episodios:</strong> ${selectedSerie.cantidad_episodios}</div>
    `;
  }
  
  function playChapter() {
    const chapterSelect = document.getElementById('capitulo');
    const selectedChapter = JSON.parse(chapterSelect.value);
    const audioPlayer = document.getElementById('audio-player');
    audioPlayer.currentTime = selectedChapter.inicio / 1000;
    audioPlayer.play();
    audioPlayer.currentTime = selectedChapter.inicio / 1000;
  }
  
  window.onload = loadSeries;
</script>

</body>
</html>
